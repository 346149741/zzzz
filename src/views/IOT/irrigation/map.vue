<template>
  <div style="height:100%">
    <div ref="map" class="map-region" />
  </div>
</template>

<script>
import MapCon from './map'

export default {
  name: 'MapCon',
  data() {
    this.MapCon = null
    return {}
  },
  mounted() {
    this.init()
  },
  methods: {
    init() {
      this.MapCon = new MapCon({
        id: this.$refs.map
      })
      const infos = [{ areaName: '1', areaLocation: '[[ 111.59963842481372, 29.061782610795532 ], [ 111.60036798566578, 29.06173572059872 ], [ 111.60037871450183, 29.061942037305172 ], [ 111.6007864102721, 29.06202643947519 ], [ 111.60081859678027, 29.062213999605618 ], [ 111.60097952932117, 29.062326535520114 ], [ 111.60093661397693, 29.06252347307486 ], [ 111.60045381635425, 29.062467205240466 ], [ 111.60042162984607, 29.062298401553008 ], [ 111.60026069730517, 29.062317157531908 ], [ 111.60020705312489, 29.06206395152857 ], [ 111.59965988248585, 29.06208270755016 ], [ 111.59963842481372, 29.061782610795532 ] ]' },
        { areaName: '2', areaLocation: '[ [ 111.60028215497731, 29.061566915713613 ], [ 111.59991737455127, 29.061576293770045 ], [ 111.5999388322234, 29.06126681745768 ], [ 111.60137649625538, 29.06126681745768 ], [ 111.6013979539275, 29.062289023562258 ], [ 111.60114046186204, 29.062298401553008 ], [ 111.60028215497731, 29.061566915713613 ] ]' },
        { areaName: '3', areaLocation: '[ [ 111.60142838023602, 29.062297229304207 ], [ 111.60142301581799, 29.0616454569098 ], [ 111.60280435346064, 29.061647801422197 ], [ 111.60280703566967, 29.06185411830461 ], [ 111.60273193381725, 29.062018233711697 ], [ 111.60262732766567, 29.062205793857046 ], [ 111.60242079757153, 29.062320674277572 ], [ 111.60142838023602, 29.062297229304207 ] ]' },
        { areaName: '4', areaLocation: '[ [ 111.60142674576488, 29.06269051802734 ], [ 111.60144418012348, 29.062300159926167 ], [ 111.60251840483396, 29.062302504423684 ], [ 111.60249292384832, 29.06253695390562 ], [ 111.60237758886069, 29.062599082928998 ], [ 111.60213350784034, 29.06268114007227 ], [ 111.60198732744902, 29.062712790667234 ], [ 111.60142674576488, 29.06269051802734 ] ]' }]
      this.handleInitRegions(infos)
    },
    handleInitRegions(infos) {
      this.MapCon.initFeatures(infos)
    },
    handleZoomToId(id) {
      this.MapCon.zoomToId(id)
    },
    updateSize() {
      setTimeout(() => {
        this.MapCon.map.updateSize()
      }, 285)
    }
  }
}
</script>

<style lang="scss" scoped>
.map-region{
  width: 100%;
  height: 100%;
}
</style>
